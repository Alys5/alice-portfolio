// ITCSS Layers 2025 + CSS Cascade Layers
// Ottimizzazione sostenibile: progressive loading, critical CSS, lazy, prefers-reduced-data

// 1. Critical styles inline (above-the-fold)
@layer critical {
    body {
        font-family: var(--font-sans, 'Source Sans 3', Arial, sans-serif);
        background: var(--alice-white, #fff);
        color: var(--alice-ebony-clay, #29353f);
        min-height: 100vh;
        margin: 0;
        will-change: background, color;
    }

    .header,
    .footer {
        will-change: box-shadow, background, color;
    }
}

// 2. Progressive enhancement: modern features solo se supportati
@layer enhancement {
    @supports (container-type: inline-size) {
        html {
            scroll-behavior: smooth;
        }

        .bento-grid,
        .card,
        .button {
            will-change: transform, box-shadow;
            /* GPU acceleration for critical animations */
            transform: translateZ(0);
        }
    }
}

// 3. ITCSS Layers (modular import)
@use '01-settings' as *;
@use '02-tools' as *;
@use '03-generic' as *;
@use '04-elements' as *;
@use '05-objects' as *;
@use '06-components' as *;
@use '07-utilities' as *;

// 4. CSS Layers per controllo della cascade e tree-shaking
@layer settings, tools, generic, elements, objects, components, utilities;

// 5. Palette Alice Mandelli come custom properties
:root {
    --alice-bright-sun: #ffc940;
    --alice-ebony-clay: #29353f;
    --alice-persian-blue: #2048b4;
    --alice-picton-blue: #48a9f8;
}

// 6. Lazy loading e conditional loading per CSS non critico
@import url('lazy-noncritical.css') layer(utilities) supports(display: grid) screen and (min-width: 900px);

// 7. Supporto prefers-reduced-data per connessioni lente
@media (prefers-reduced-data: reduce) {
    * {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
        background-image: none !important;
    }
}

// 8. Esempio: media query per container queries
@container (min-width: 600px) {
    body {
        font-size: 1.125rem;
    }
}

// 9. Commenti metriche
// Target: < 50KB CSS bundle, < 15% unused CSS, 95+ Lighthouse Performance
